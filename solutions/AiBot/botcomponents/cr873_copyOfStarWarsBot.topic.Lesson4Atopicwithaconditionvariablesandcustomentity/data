kind: AdaptiveDialog
beginDialog:
  kind: OnRecognizedIntent
  id: main
  intent:
    displayName: Lesson 4 - A topic with a condition, variables and custom entity.
    triggerQueries:
      - What is the best product for me
      - I want a laptop powerful enough for gaming
      - I want a business laptop
      - What is a product for the home
      - I am a home user

  actions:
    - kind: Question
      id: 04f33a2f-64d3-4698-bd3e-5fe0965ec78c
      alwaysPrompt: false
      variable: init:Topic.pva_UsageType
      prompt: Do you see yourself as a home user, a gamer or a business user?
      entity:
        kind: ClosedListEntityReference
        entityId: cr873_copyOfStarWarsBot.customtype.UsageType
        selectedItems:
          - ff0ca6dd-de7a-4bee-b849-16210d63f3c5
          - 2ccf421b-89a6-43a8-8b4f-b8d8f63b58bf
          - 2d32734c-9552-47c5-963b-563fe1d9ea7e

    - kind: ConditionGroup
      id: condition-0
      conditions:
        - id: condition-0-item-0
          condition: =Topic.pva_UsageType = 'cr873_copyOfStarWarsBot.customtype.UsageType'.'ff0ca6dd-de7a-4bee-b849-16210d63f3c5'
          actions:
            - kind: SendMessage
              id: 4562fc54-7872-44c1-a218-19e2f1bba534
              message: |-
                We have the product for you!
                
                The Contoso Laptop i3 has enough power and memory to last you years.

        - id: condition-0-item-1
          condition: =Topic.pva_UsageType = 'cr873_copyOfStarWarsBot.customtype.UsageType'.'2ccf421b-89a6-43a8-8b4f-b8d8f63b58bf'
          actions:
            - kind: SendMessage
              id: 28d7244f-b52c-45f1-bc35-d48cf9c76d24
              message: |-
                We have the product for you!
                
                The Contoso Laptop i7 has enough power and memory to let you play the latest games without missing a beat.

        - id: condition-0-item-2
          condition: =Topic.pva_UsageType = 'cr873_copyOfStarWarsBot.customtype.UsageType'.'2d32734c-9552-47c5-963b-563fe1d9ea7e'
          actions:
            - kind: SendMessage
              id: 243d235a-417c-4056-b7bd-174572d42c11
              message: |-
                We have the product for you!
                
                The Contoso Laptop i5 has enough power and memory to last you years. It is also mobile, with an extra camera for crisp and clear video conferences.

    - kind: Question
      id: 0a73e756-9c83-45aa-9be6-86aba432423e
      alwaysPrompt: false
      variable: init:Topic.pva_AddToCart
      prompt: Shall I add this to your cart?
      entity: BooleanPrebuiltEntity

    - kind: ConditionGroup
      id: condition-1
      conditions:
        - id: condition-1-item-0
          condition: =Topic.pva_AddToCart = true
          actions:
            - kind: SendMessage
              id: 5bf5e2f0-e06a-4568-a08d-c0f6f4eaadd0
              message: Excellent. The item has been added to your cart.

      elseActions:
        - kind: SendMessage
          id: 8aff95f1-bd34-4943-857b-957976c0b453
          message: Understood. Please return when you are ready to buy our products.

    - kind: BeginDialog
      id: 3aad311e-7cfc-4ea7-93fd-05f8c90428b0
      dialog: cr873_copyOfStarWarsBot.topic.EndofConversation